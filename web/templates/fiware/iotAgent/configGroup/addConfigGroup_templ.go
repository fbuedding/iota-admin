// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.639
package configgroup

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import "context"
import "io"
import "bytes"

import "github.com/fbuedding/iota-admin/web/templates/fiware/iotAgent/attributes"

const TEMPLATE_ID = "add-config-group-form-template"
const FORM_ID = "add-config-group-form"

func AddConfigGroupForm(services string, iotAgents string) templ.Component {
	return templ.ComponentFunc(func(ctx context.Context, templ_7745c5c3_W io.Writer) (templ_7745c5c3_Err error) {
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templ_7745c5c3_W.(*bytes.Buffer)
		if !templ_7745c5c3_IsBuffer {
			templ_7745c5c3_Buffer = templ.GetBuffer()
			defer templ.ReleaseBuffer(templ_7745c5c3_Buffer)
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<add-config-group-form")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if services != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" services=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var2 string
			templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(services)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/fiware/iotAgent/configGroup/addConfigGroup.templ`, Line: 11, Col: 22}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		if iotAgents != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" iot-agents=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(iotAgents)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/fiware/iotAgent/configGroup/addConfigGroup.templ`, Line: 14, Col: 25}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("></add-config-group-form>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if !templ_7745c5c3_IsBuffer {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteTo(templ_7745c5c3_W)
		}
		return templ_7745c5c3_Err
	})
}

func uuidv4(id string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_uuidv4_3254`,
		Function: `function __templ_uuidv4_3254(id){let el = document.getElementById(id);
  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'
    .replace(/[xy]/g, function (c) {
      const r = Math.random() * 16 | 0, 
        v = c == 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  el.value = uuid;
}`,
		Call:       templ.SafeScript(`__templ_uuidv4_3254`, id),
		CallInline: templ.SafeScriptInline(`__templ_uuidv4_3254`, id),
	}
}

func AddConfigGroupFormScript(templateId string, formId string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_AddConfigGroupFormScript_21d1`,
		Function: `function __templ_AddConfigGroupFormScript_21d1(templateId, formId){class AddConfigGroupForm extends HTMLElement {
    static formAssociated = true;
    constructor() {
      super();
      this.internals_ = this.attachInternals();
      this.state = {
        attributes : {
          count: 0,
          countMetadata : []
        }
      }

    }
    connectedCallback() {
      let template = document.getElementById(templateId);
      this.appendChild(template.content.cloneNode(true));
      this.id = formId;
      this.parseServices();
      this.parseIoTAgents();
    }

    disconnectedCallback() {
    }

    adoptedCallback() {
    }

    attributeChangedCallback(name, oldValue, newValue) {
    }
    
    parseIoTAgents() {
      if(this.hasAttribute("iot-agents")){
        try  {
          const iotAgents = JSON.parse(this.getAttribute("iot-agents"))
          const select = document.getElementById("select-iot-agents");
          for (const iotAgent of iotAgents) {
            const option = document.createElement("option");
            option.value = iotAgent.Id;
            option.innerHTML = iotAgent.Alias;
            select.appendChild(option);
          }
        } catch(e) {
          alert("Error parsing Fiware Services")
        }
      }
    }

    parseServices() {
     if(this.hasAttribute("services")){
       try {
        const services = JSON.parse(this.getAttribute("services"));
        const select = document.getElementById("select-services");
        for (const service of services) {
          const option = document.createElement("option");
          option.value = service.Service;
          option.innerHTML = service.Service;
          select.appendChild(option);
        }
       } catch(e){
        alert("Error parsing Fiware Services")
       }
     }
    }

  }
  customElements.define("add-config-group-form", AddConfigGroupForm);
}`,
		Call:       templ.SafeScript(`__templ_AddConfigGroupFormScript_21d1`, templateId, formId),
		CallInline: templ.SafeScriptInline(`__templ_AddConfigGroupFormScript_21d1`, templateId, formId),
	}
}

func AddConfigGroupFormTemplate() templ.Component {
	return templ.ComponentFunc(func(ctx context.Context, templ_7745c5c3_W io.Writer) (templ_7745c5c3_Err error) {
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templ_7745c5c3_W.(*bytes.Buffer)
		if !templ_7745c5c3_IsBuffer {
			templ_7745c5c3_Buffer = templ.GetBuffer()
			defer templ.ReleaseBuffer(templ_7745c5c3_Buffer)
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var4 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var4 == nil {
			templ_7745c5c3_Var4 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<template id=\"add-config-group-form-template\"><form hx-post=\"/configGroups\"><label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">IoT-Agent</span></div><select name=\"iotAgent\" class=\"select select-bordered w-full\" required hx-get=\"/servicePaths\" hx-target=\"#service-paths\" hx-swap=\"innerHTML\" hx-include=\"#select-services\" id=\"select-iot-agents\"><option disabled selected value=\"\">Select IoT-Agent</option></select></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Service</span></div><select name=\"service\" class=\"select select-bordered w-full\" required hx-get=\"/servicePaths\" hx-target=\"#service-paths\" hx-swap=\"innerHTML\" hx-include=\"#select-iot-agents\" id=\"select-services\"><option disabled selected value=\"\">Select service</option></select></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Service-Path</span></div><input name=\"subservice\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" list=\"service-paths\" autocomplete=\"off\" required> <datalist id=\"service-paths\"></datalist></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Resource</span></div><input name=\"resource\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" list=\"resources\" autocomplete=\"off\" required> <datalist id=\"resources\"><option>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var5 string
		templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs("/iot/d")
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/templates/fiware/iotAgent/configGroup/addConfigGroup.templ`, Line: 151, Col: 23}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</option></datalist></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">API Key</span></div><div class=\"join\"><input id=\"apikey-input\" name=\"apikey\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered join-item w-full\" autocomplete=\"off\" required> ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, uuidv4("apikey-input"))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<input type=\"button\" class=\"btn join-item\" value=\"Generate\" onclick=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var6 templ.ComponentScript = uuidv4("apikey-input")
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var6.Call)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"></div></label><div class=\"form-control pt-5\"><label class=\"label cursor-pointer\"><span class=\"label-text\">Timestamp</span> <input name=\"timestamp\" type=\"checkbox\" checked=\"checked\" class=\"checkbox\"></label></div><label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Entity type</span></div><input name=\"entity_type\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\" required></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Trust token</span></div><input name=\"trust\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Context Broker host</span></div><input name=\"cbHost\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = attributes.AttributesInput().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = attributes.LazyAtrributesInput().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = attributes.CommandsInput().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = attributes.StaticAttributesInput().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = attributes.InternalAttributesInput().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Explicit Attributes</span></div><input name=\"explicitAttrs\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" list=\"explicit-attributes-datalist\" autocomplete=\"off\"> <datalist id=\"explicit-attributes-datalist\"><option>true </option> <option>false </option></datalist></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Entity Name Expression</span></div><input name=\"entityNameExp\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">NGSI Version</span></div><select name=\"ngsiVersion\" class=\"select select-bordered w-full\"><option selected value=\"v2\">NGSI-v2</option> <option value=\"ld\">NGSI-LD</option></select></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Default Entity Name Conjunction</span></div><input name=\"defaultEntityNameConjunction\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label><div class=\"form-control pt-5\"><label class=\"label cursor-pointer\"><span class=\"label-text\">Autoprovision</span> <input name=\"autoprovision\" type=\"checkbox\" checked=\"checked\" class=\"checkbox\"></label></div><label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Payload Type</span></div><select name=\"payloadType\" class=\"select select-bordered w-full\"><option selected value=\"iotagent\">IoTAgent</option> <option value=\"ngsiv2\">NGSI-v2</option> <option value=\"ngsild\">NGSI-LD</option></select></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Transport</span></div><input name=\"transport\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label> <label class=\"form-control\"><div class=\"label\"><span class=\"label-text\">Endpoint</span></div><input name=\"endpoint\" type=\"text\" placeholder=\"Type here\" class=\"input input-bordered\" autocomplete=\"off\"></label><p class=\"pt-5\"><input type=\"submit\" value=\"Submit\" class=\"btn\"></p></form></template>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = AddConfigGroupFormScript(TEMPLATE_ID, FORM_ID).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if !templ_7745c5c3_IsBuffer {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteTo(templ_7745c5c3_W)
		}
		return templ_7745c5c3_Err
	})
}
